## Define the stages & order of execution

stages:
  - CLUSTER-SETUP
  - OPENEBS-SETUP
  - FUNCTIONAL
  - CHAOS
  - CLEANUP

HUNE-OpenShift-3.10:
  image: openebs/openshift-ci:latest
  stage: CLUSTER-SETUP
  script:     
    - chmod 755 ./Openshift-EE/pipelines/ElasticSearch/stages/1-cluster-setup/HUNE-cluster-state/cluster-state
    - ./Openshift-EE/pipelines/ElasticSearch/stages/1-cluster-setup/HUNE-cluster-state/cluster-state

CRGI-OpenEBS:
  image: openebs/openshift-ci:latest
  stage: OPENEBS-SETUP
  script:
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/2-setup/CRGI-openebs-deploy/deploy-openebs
    - ./Openshift-EE/pipelines/ElasticSearch/stages/2-setup/CRGI-openebs-deploy/deploy-openebs

12PS-OpenEBS-POLICIES:
  image: openebs/openshift-ci:latest
  stage: OPENEBS-SETUP
  script:
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/2-setup/12PS-storage-policies/openebs-sc
    - ./Openshift-EE/pipelines/ElasticSearch/stages/2-setup/12PS-storage-policies/openebs-sc
  
2RWJ-CSTOR-POOL:
  image: openebs/openshift-ci:latest
  stage: OPENEBS-SETUP
  script:
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/2-setup/2RWJ-create-striped-pool/create-pool
    - ./Openshift-EE/pipelines/ElasticSearch/stages/2-setup/2RWJ-create-striped-pool/create-pool
    
.func_test_template:
  image: openebs/openshift-ci:latest
  stage: FUNCTIONAL
  when: always
  dependencies:
    - CRGI-OpenEBS
     

5Q19-Elasticsearch-Provision:
  extends: .func_test_template
  script: 	
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/3-functional/5Q19-deploy-elasticsearch/elasticsearch-provision
    - ./Openshift-EE/pipelines/ElasticSearch/stages/3-functional/5Q19-deploy-elasticsearch/elasticsearch-provision


86TL-App-Scaleup:
  extends: .func_test_template
  script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/3-functional/86TL-App-replica-scaleup/app-replica-scaleup
    - ./Openshift-EE/pipelines/ElasticSearch/stages/3-functional/86TL-App-replica-scaleup/app-replica-scaleup
  
     
.chaos_test_template:
  image: openebs/openshift-ci:latest
  stage: CHAOS
  when: always
  dependencies:
    - CRGI-OpenEBS

  
N4NK-Openebs-Pool-Failure:
  extends: .chaos_test_template
  script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/N4NK-openebs-pool-failure/openebs_pool_failure
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/N4NK-opeenbs-pool-failure/openebs_pool_failure


3K0C-Openebs-Target-Network-Delay:
  extends: .chaos_test_template
  script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/3K0C-openebs-target-network-delay/openebs_target_network_delay
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/3K0C-openebs-target-network-delay/openebs_target_network_delay


2YLI-Cstor-Volume-Istgt-Kill:
  extends: .chaos_test_template
  script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/2YLI-cstor-volume-istgt-kill/cstor-volume-istgt-kill
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/2YLI-cstor-volume-istgt-kill/cstor-volume-istgt-kill

37B3-Openebs-Target-Tailure:
   extends: .chaos_test_template
   script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/37B3-openebs-target-failure/openebs-target-failure
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/37B3-openebs-target-failure/openebs-target-failure
    
401P-Elasticsearch-Pod-Failure:
   extends: .chaos_test_template
   script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/401P-elasticsearch-pod-failure/elasticsearch-pod-failure
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/401P-elasticsearch-pod-failure/elasticsearch-pod-failure

638K-Cstor-Pool-Kill:
   extends: .chaos_test_template
   script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/638K-cstor-pool-kill/cstor-pool-kill
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/638K-cstor-pool-kill/cstor-pool-kill

E16S-Cstor-Volume-Mgmt-Kill:
   extends: .chaos_test_template
   script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/638K-cstor-pool-kill/cstor-pool-kill
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/638K-cstor-pool-kill/cstor-pool-kill


II1Z-Pool-Network-Delay:
   extends: .chaos_test_template
   script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/II1Z-pool-network-delay/pool-network-delay
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/II1Z-pool-network-delay/pool-network-delay

IOWW-Cstor-Pool-Delete:
   extends: .chaos_test_template
   script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/IOWW-cstor-pool-delete/cstor-pool-delete
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/IOWW-cstor-pool-delete/cstor-pool-delete


LY12-Target-Network-Delay:
   extends: .chaos_test_template
   script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/LY12-target-network-delay/target-network-delay
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/LY12-target-network-delay/target-network-delay


PMIJ-Openebs-Node-Service-Failure:
   extends: .chaos_test_template
   script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/PMIJ-openebs-node-service-failure/openebs-node-service-failure
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/PMIJ-openebs-node-service-failure/openebs-node-service-failure



QQ9F-Pool-Network-Loss:
   extends: .chaos_test_template
   script: 
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/QQ9F-pool-network-loss/pool-network-loss
    - ./Openshift-EE/pipelines/ElasticSearch/stages/4-chaos/QQ9F-pool-network-loss/pool-network-loss


638K-cluster-Delete:
  image: openebs/openshift-ci:latest
  stage: CLEANUP
  when: always
  dependencies:
    - HUNE-OpenShift-3.10
  script:
    - chmod 775 ./Openshift-EE/pipelines/ElasticSearch/stages/5-cleanup/638K-cluster-cleanup/cluster-cleanup
    - ./Openshift-EE/pipelines/ElasticSearch/stages/5-cleanup/638K-cluster-cleanup/cluster-cleanup
